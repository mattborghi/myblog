{
    "componentChunkName": "component---src-templates-post-tsx",
    "path": "/blog/migrating-to-railway/index/",
    "result": {"data":{"logo":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABNklEQVQY003QMWuVQRCF4S8EUVNolcagYGMKRTARFCsRESsLoyAIBtTC1BELS7VRQUVBiBAQFUEtrMRC8wMC+QPm7m1T7pDuVvOEhS0sDswMMy9nzlAihqZRrcM4YtidTKYyc2hC0xNca3VmTvfZ0Pvhv/4YDjbYpRJxYVTr3Dji6O5k0hbnM/M+zmINr3C1H57GCmZxGMs4gx94PpRal0vEzRJxfrvWeUxn5vfMXMUffMQ7fG4H+ITHmbmOX/iCRWzgfXN4q0TcLhEPRrWe+Fdrc7iema9xAy9xEUvYxrPu9C/u4gPu4E0DN+BKqfVkiVgaRyz2lxvwK66ggS/jHp7ibXf7osfwDY/wED8b8HiJODSOmNvc2Zlp2WTm78y8jq3MPNcdtbz240DPts2OYKHX+zLz1B4Vm4OfycXqDgAAAABJRU5ErkJggg==","width":400,"height":128,"src":"/myblog/static/2b5eaa0de166a8b5faebad4955c2200c/3891b/ghost-logo.png","srcSet":"/myblog/static/2b5eaa0de166a8b5faebad4955c2200c/3891b/ghost-logo.png 1x"}}},"markdownRemark":{"html":"<h2>Heroku build process</h2>\n<p>The repository to be migrated is <a href=\"https://github.com/mattborghi/background-tasks-queue\">Background Tasks Queue</a>.</p>\n<p>The services that we need to migrate are:</p>\n<ul>\n<li>The Django GraphQL API.</li>\n<li>The Julia Workers.</li>\n<li>The Julia Sink.</li>\n</ul>\n<img src=\"https://github.com/mattborghi/background-tasks-queue/raw/main/assets/stack.png\" width=\"100%\" alt=\"Stack\">\n<p>In order to deploy new changes to Heroku, I ran the script <code class=\"language-text\">RUN.prod.sh</code> each time there was a change, specifying the service to update. For the backend for example, the script pushed to the Heroku remote repository <code class=\"language-text\">push_to_heroku $backend_GIT_HEROKU_REMOTE $backend_SUBFOLDER $backend_REMOTE_BRANCH</code>. All the services have a Dockerfile which is specified in a <code class=\"language-text\">Heroku.yml</code> file.</p>\n<h2>Railway migration</h2>\n<p>Starting from an empty project, I used the UI to create all these services. Then I sync the github repository, this allows to automatically deploy based on repository changes. The important step is to specify the subfolder where to run the service from. In this case, the backend subdirectory will be ‘backend/’ and from the worker ‘results/Worker’. What I liked the most was that I could sync secret env variables from Heroku by pressing <code class=\"language-text\">CTRL+K</code>.\nFinally, the Julia services have a Dockerfile that is not named just <code class=\"language-text\">Dockerfile</code> but instead <code class=\"language-text\">alpine.Dockerfile</code> or <code class=\"language-text\">buster.Dockerfile</code>. To tell Railway which file to use we need to set an environment variable called <code class=\"language-text\">RAILWAY_DOCKERFILE_PATH</code> with the Docker name.\nAnd that’s it. Now further changes are needed, it’s pretty straightforward.\nA drawback from Railway is that I couldn’t make the Worker service work. The log is not much of a help, it just gets killed when it starts. I suspect this is due to insufficient memory assigned to the free tier.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 685px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/myblog/static/881a2c66c6022fa4e12a9690c5b41617/a31f0/services.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABbElEQVQoz42SW3OCMBCFfa+CIqAkJBIRAUFRK7bF+uL//0+ns4tiL07Hh49NJmf2cpaeZ4UgnBeBcf8REjfN4/eWm6ZHH99WSGZrGJnDiAxzmTNRkCEKUojxnDVxuMJCFTCifSMtn0UG6baanjuQ8G2NU33BvvjAYXPC67rBcXvGrnhHlR0ReguQbl82aOoL6u0Z+3WDXdmgrs6o8jcoP7knnAw1fCfClBgZTEcREzgGk+GMI93FcIappRAwGsLSfKeGSEOxSyjCFFG4QqLXWKiSIyG9GILEowiJY5CMDXLHYOkYZNe7cOOrLfruoduXcAchj/Ydz1LtBLaCN9S/mHGcXPmxlHJ5QKJLxKpg8+fcbclnqk6JucAD7sXD+8jH6oxNdkRdfbL5m7TmJZHhtBSPOrz+Gv/RJfRoEY5BMDJsMHV1M7qNquviqYSBTBHJnBdCY1Nc6BKyM/zJhLfDxFbwrb9jUYfEM+NSwi/4gSCVuXxw/wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"services\"\n        title=\"services\"\n        src=\"/myblog/static/881a2c66c6022fa4e12a9690c5b41617/a31f0/services.png\"\n        srcset=\"/myblog/static/881a2c66c6022fa4e12a9690c5b41617/0eb09/services.png 500w,\n/myblog/static/881a2c66c6022fa4e12a9690c5b41617/a31f0/services.png 685w\"\n        sizes=\"(max-width: 685px) 100vw, 685px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Heroku build process"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The repository to be migrated is "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/mattborghi/background-tasks-queue"},"children":[{"type":"text","value":"Background Tasks Queue"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The services that we need to migrate are:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"The Django GraphQL API."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"The Julia Workers."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"The Julia Sink."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"img","properties":{"src":"https://github.com/mattborghi/background-tasks-queue/raw/main/assets/stack.png","width":"100%","alt":"Stack"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"In order to deploy new changes to Heroku, I ran the script "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"RUN.prod.sh"}]},{"type":"text","value":" each time there was a change, specifying the service to update. For the backend for example, the script pushed to the Heroku remote repository "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"push_to_heroku $backend_GIT_HEROKU_REMOTE $backend_SUBFOLDER $backend_REMOTE_BRANCH"}]},{"type":"text","value":". All the services have a Dockerfile which is specified in a "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Heroku.yml"}]},{"type":"text","value":" file."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Railway migration"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Starting from an empty project, I used the UI to create all these services. Then I sync the github repository, this allows to automatically deploy based on repository changes. The important step is to specify the subfolder where to run the service from. In this case, the backend subdirectory will be ‘backend/’ and from the worker ‘results/Worker’. What I liked the most was that I could sync secret env variables from Heroku by pressing "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"CTRL+K"}]},{"type":"text","value":".\nFinally, the Julia services have a Dockerfile that is not named just "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Dockerfile"}]},{"type":"text","value":" but instead "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"alpine.Dockerfile"}]},{"type":"text","value":" or "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"buster.Dockerfile"}]},{"type":"text","value":". To tell Railway which file to use we need to set an environment variable called "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"RAILWAY_DOCKERFILE_PATH"}]},{"type":"text","value":" with the Docker name.\nAnd that’s it. Now further changes are needed, it’s pretty straightforward.\nA drawback from Railway is that I couldn’t make the Worker service work. The log is not much of a help, it just gets killed when it starts. I suspect this is due to insufficient memory assigned to the free tier."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 685px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/myblog/static/881a2c66c6022fa4e12a9690c5b41617/a31f0/services.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 55.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABbElEQVQoz42SW3OCMBCFfa+CIqAkJBIRAUFRK7bF+uL//0+ns4tiL07Hh49NJmf2cpaeZ4UgnBeBcf8REjfN4/eWm6ZHH99WSGZrGJnDiAxzmTNRkCEKUojxnDVxuMJCFTCifSMtn0UG6baanjuQ8G2NU33BvvjAYXPC67rBcXvGrnhHlR0ReguQbl82aOoL6u0Z+3WDXdmgrs6o8jcoP7knnAw1fCfClBgZTEcREzgGk+GMI93FcIappRAwGsLSfKeGSEOxSyjCFFG4QqLXWKiSIyG9GILEowiJY5CMDXLHYOkYZNe7cOOrLfruoduXcAchj/Ydz1LtBLaCN9S/mHGcXPmxlHJ5QKJLxKpg8+fcbclnqk6JucAD7sXD+8jH6oxNdkRdfbL5m7TmJZHhtBSPOrz+Gv/RJfRoEY5BMDJsMHV1M7qNquviqYSBTBHJnBdCY1Nc6BKyM/zJhLfDxFbwrb9jUYfEM+NSwi/4gSCVuXxw/wAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"services","title":"services","src":"/myblog/static/881a2c66c6022fa4e12a9690c5b41617/a31f0/services.png","srcSet":["/myblog/static/881a2c66c6022fa4e12a9690c5b41617/0eb09/services.png 500w","/myblog/static/881a2c66c6022fa4e12a9690c5b41617/a31f0/services.png 685w"],"sizes":["(max-width:","685px)","100vw,","685px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]}],"data":{"quirksMode":false}},"excerpt":"Heroku build process The repository to be migrated is Background Tasks Queue. The services that we need to migrate are: The Django GraphQL…","timeToRead":1,"frontmatter":{"title":"My experience migrating from Heroku to Railway","userDate":"11 September 2022","date":"2022-09-11T00:00:00.000Z","tags":["Development","Railway","Heroku"],"excerpt":"Sharing my experience from migrating a project from Heroku to Railway.","image":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAADKUlEQVQ4y61VSU9TURR+BVqgFMqMUgUF1K0IghCCEsQ4EP+DxmgUKHSg4IKYqASnREmhLW2dQIEIUloQDENJwESWyALckBQBNxCwgUQShs+cC++1JQwbb/Ll3rx73tfvnPedUw7ba3Nzk4HWxsYG1tfXsdeiO4rZ+R4tjn/I72tra8Ll/Pw8BgedaGxsQmPjBww5h7CwsCDce8fyHJw3Ga9qamoKRfdKkJiQBGlwKMQBwZCIg9n5+LEUKJVlcLmmBbXeHIJCPoWODhsU8QkQcWKEhUYgMiIGUZGxDBHh0ZCFyMFxflAoEmC3OwRSgdBb2bu378FxHDjOH8FBMogDghhIXVBgCPuB6Kg4xETHMbUU47B3+aTP8cqWl5dReO06cnLO42L+JeRdyGfIzc1DdlYOzqSmM5UcJ4I8LJIRE+kRRSKmp38JH1NImYrf9qkdDkcXbLZOdHba2d7b+xWDA0709w9geHgEjx4+ZkShsnDExhxi6ZeVqYXUGeHKygquXilE6uk0nE0/h/S0TKSnZSAzIwvxh4+y1MLlUcjMzIbTOYTu7i+MlJRSTZOTTmJxcdFjm5mZGbS1tbMikzJCx2cbU0XpU139/STb9eVgsVhRX29gz+ijhUjDmHqBcPT7KO7cvouSklIUFys9KFJCpdKgXKuDVqNDRcV9qFUaqNVa5seCgssIlEhZBs3NrR7CiYlJ6PV1aDCZYTI2+MBoMMFgMMLAdhOMRhPq6gxwu924eeMWI6S0W7wJ5+Z+w2p9A6v19YEwm61oavqI2lo9JGLpdhlEGBn55iFc/bvKAs0NFpjNlq19L5gtLBOtVgeNWosKXSV05ZVw/3FvEfKmpqJWVT3A82cvUFPzFE8OwKuXtdDr61FdXYOxsTGPbXhjj/8YZ8WlFPxEYuav/SDiAlgs1W9y8qevsfm2IX9RALVYXGw86wa+j3nQM7ojY1NcX1+/b+vxk4JPnbxIw4FUyKRyZmgaCgQ6k+fojiZRT0/v7sNh5/hyuVwoVaqQnHSCEZA1CHROST4FjaYcs7Oz+4+v3YYmtRPZoaWllfmMzktLS/sP2P/9F/APUUhhbK8ppUoAAAAASUVORK5CYII=","aspectRatio":1,"src":"/myblog/static/d53f6c4ce8702eed88d454692f2a7048/4e530/logo-dark.png","srcSet":"/myblog/static/d53f6c4ce8702eed88d454692f2a7048/3a443/logo-dark.png 930w,\n/myblog/static/d53f6c4ce8702eed88d454692f2a7048/4e530/logo-dark.png 1024w","sizes":"(max-width: 1024px) 100vw, 1024px"}}},"author":[{"id":"Matias Borghi","bio":"I am the only owner of this blog.","avatar":{"children":[{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAABFUlEQVQ4y2MQVdQiGzEMJ80iCppwBOcSpRlZHZop+DSLKWnzS6v0Tpl5/da9E2cuXL1xZ/6SlXxSyvOXrlq8cp2ArBpBzaqNnX1HT57Zvmf/4ROnJk6fwyutMnHG3GlzFgri1wxBAjKq/NIqMKQqoqAJESHK2T2Tpl+9fuvE6XOnzl44dfbCidPnLl+7MWPeImF5DUKaZVQbO/uPnji7c++h3QeO7D5wZOfeQ4ePn+6dPJOAZgxnq4IR1AtEObt74vQr126du3jVLSDc3Mnr9LlLl6/enD53kRBhZ0urNndNOH7m3KFjJ519Q0wd3PcfOX7s9Ln+abOIcraQnLqgnJqgnJqwvIawgiaELSinPsxzFT00AwBuRuAIP+7NSQAAAABJRU5ErkJggg==","aspectRatio":1,"src":"/myblog/static/7ffe238930a689e103d70f234bb00199/3891b/ghost.png","srcSet":"/myblog/static/7ffe238930a689e103d70f234bb00199/22f7f/ghost.png 40w,\n/myblog/static/7ffe238930a689e103d70f234bb00199/587c9/ghost.png 80w,\n/myblog/static/7ffe238930a689e103d70f234bb00199/d966b/ghost.png 120w,\n/myblog/static/7ffe238930a689e103d70f234bb00199/3891b/ghost.png 400w","sizes":"(max-width: 400px) 100vw, 400px"}}]}}]}},"relatedPosts":{"totalCount":1,"edges":[{"node":{"id":"604cf03d-7f14-52ca-8c82-dc80912c1285","timeToRead":1,"excerpt":"Heroku build process The repository to be migrated is Background Tasks Queue. The services that we need to migrate are: The Django GraphQL…","frontmatter":{"title":"My experience migrating from Heroku to Railway","date":"2022-09-11T00:00:00.000Z"},"fields":{"slug":"/blog/migrating-to-railway/index/"}}}]}},"pageContext":{"slug":"/blog/migrating-to-railway/index/","prev":{"excerpt":"ROS expired signatures Solving the issue of ROS expiring signatures in Ubuntu is as easy as typing this command in the terminal:","timeToRead":1,"frontmatter":{"title":"ROS Expire Signatures","tags":["ROS"],"date":"2021-11-17T00:00:00.000Z","draft":null,"excerpt":"Just a memo for revalidating expiring signatures in ROS.","image":{"childImageSharp":{"fluid":{"aspectRatio":1.456989247311828,"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAACHElEQVQoz6WSy28SURTG+VvdmOiiCxdWbYwUY7BJW54KRdAKghURFqaaoshrgHkwnfKaAoUWZpi5M1Bs0FBbZ+YYMqAoiTHxS+7Nd3Lv75yz+Azwb9I0bdEb9ELX4idNg/mnmYVf8KIuL78PP48UVdXL8fic45GiKLrvcOLFxeUU3tqOkHTFsx0hihXPswgArJgcq2uehxafoqgnXcFodtncQevjF11eXHc8d2y9DMf2pnAmR3e6QjY/ubECo2raiskBALdX7bV6e8PhT+doAAiGd68umcwWHwCoqjaFvf4YtV/z+qMkXfX6YwCwtLy2fM92865F07Q79x0i6gNAKltct/vfvE1cu/EgGH43hQtEieNRgSx1OYRTZUVRbhmtoy9fzZs+tt7ecAbiiQIA2Fyh0OsJMz7/duW6Ue4PJ7DTs4NTZadnh6Crj568AoCngSgAHDaOw9G9s7ORedNnd4d8gehRm7O6gjZ3cDq5J8oiGoioj6RTQZAFQe5yiO9JHI96gtzhRCQNeF6iGVaShyLqN4465WoToUFPkA1Sf7j7PvnhExb/iKWyRJ5gkhkimSYyGJXGqHgCS6ZxnDyg6EoGo/I4k0jhucJ+Oksi+XSydr3RKpXZgxJbY5uS3G+1TkiKYeuteqNVrhy22x2SYjhOKNKlRvOYKdVqbJPjhcnav0UG4M8Q/TWws3jC7MzFUG/ys9e80b0B/kM/ALNb4xSCgXd4AAAAAElFTkSuQmCC","sizes":"(max-width: 271px) 100vw, 271px","src":"/myblog/static/4fbc166f6d4a8ceaca2edfce9da9b20a/ed7f8/ros.png","srcSet":"/myblog/static/4fbc166f6d4a8ceaca2edfce9da9b20a/ed7f8/ros.png 271w"}}},"author":[{"id":"Matias Borghi","bio":"I am the only owner of this blog.","avatar":{"children":[{"fluid":{"aspectRatio":1,"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAABFUlEQVQ4y2MQVdQiGzEMJ80iCppwBOcSpRlZHZop+DSLKWnzS6v0Tpl5/da9E2cuXL1xZ/6SlXxSyvOXrlq8cp2ArBpBzaqNnX1HT57Zvmf/4ROnJk6fwyutMnHG3GlzFgri1wxBAjKq/NIqMKQqoqAJESHK2T2Tpl+9fuvE6XOnzl44dfbCidPnLl+7MWPeImF5DUKaZVQbO/uPnji7c++h3QeO7D5wZOfeQ4ePn+6dPJOAZgxnq4IR1AtEObt74vQr126du3jVLSDc3Mnr9LlLl6/enD53kRBhZ0urNndNOH7m3KFjJ519Q0wd3PcfOX7s9Ln+abOIcraQnLqgnJqgnJqwvIawgiaELSinPsxzFT00AwBuRuAIP+7NSQAAAABJRU5ErkJggg==","sizes":"(max-width: 400px) 100vw, 400px","src":"/myblog/static/7ffe238930a689e103d70f234bb00199/3891b/ghost.png","srcSet":"/myblog/static/7ffe238930a689e103d70f234bb00199/8ac63/ghost.png 200w,\n/myblog/static/7ffe238930a689e103d70f234bb00199/3891b/ghost.png 400w"}}]}}]},"fields":{"layout":"post","slug":"/blog/ros-expire-signatures/index/"}},"next":null,"primaryTag":"Development"}},
    "staticQueryHashes": ["1380537706"]}